(this["webpackJsonpreact-slide"]=this["webpackJsonpreact-slide"]||[]).push([[0],{10:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a(1),s=a(3),o=a(4),i=a(6),l=a(5),c=a(0),u=a.n(c),h=a(8),d=a.n(h),g=(a(15),!0),m=!1,f=!0;function v(e,t){if("undefined"===typeof e||"undefined"===typeof t)return null;var a=p(e[1]-t[1]),r=b(e[0]-t[0],e[1]);return Math.sqrt(a*a+r*r)}function p(e){return 110.574*Math.abs(e)}function b(e,t){var a=t*Math.PI/180;return 111.32*Math.abs(e)*Math.cos(a)}function w(e){if(!e.inCell)return u.a.createElement(u.a.Fragment,null);var t,a,r=e.className;return e.active&&(r+=" active"),u.a.createElement("div",{className:r,style:(t=e.x,a=e.y,{transform:"translate(".concat(t,"px, ").concat(a,"px)")})})}function C(e){return u.a.createElement("img",{src:"https://beethacker.github.io/slidepuzzle/img/camping.jpg",alt:"stub",style:{marginTop:-e.sy+"px",width:e.w+"px",height:e.h+"px",marginLeft:-e.sx+"px"}})}function y(e){var t=e.value,a=!1,r=e.isNearest,n=r?"square selected":"square",s=null;if(r){var o,i,l=.5*e.w,c=.5*e.h,h=b(e.geoUser[0]-e.geoCenter[0],e.geoUser[1]),d=p(e.geoUser[1]-e.geoCenter[1]),g=Math.sqrt(h*h+d*d),f=0,y=0;g>1e-4&&(f=h/g,y=d/g);var E,q=e.geoCenter[2];if(g<q)E=g/q*30,a=!0;else{var O=e.geoCenter[3];E=((g=Math.min(g,O))-q)/(O-q)*(e.h/2-30)+30}o=l+E*f,i=c+E*y,s=u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"circle"}),u.a.createElement(w,{className:"user-circle",x:o,y:i,active:a,inCell:r}),u.a.createElement(w,{className:"center-circle",x:l,y:c,active:a,inCell:r}))}if(!t)return u.a.createElement("td",{className:"square empty",style:{width:e.w,height:e.h}},s);var j=t%e.rows,k=Math.floor(t/e.rows),N=v(e.geoCenter,e.geoUser),S=m?u.a.createElement("span",{style:{position:"absolute",color:"white",backgroundColor:"black"}}," ",e.geoCenter.toString()+" ==> "+N+", in="+r," "):null;return u.a.createElement("td",{className:n,onClick:function(){return e.handleClick()},style:{width:e.w,height:e.h}},S,s,u.a.createElement(C,{w:e.cols*e.w,h:e.rows*e.h,sx:j*e.w,sy:k*e.h,inCell:r}))}var E=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;Object(s.a)(this,a);return(r=t.call(this,e)).state={squares:[1,null,2,3,4,5,6,7,8],cols:3,rows:3,width:window.innerWidth,height:window.innerHeight},setInterval((function(){r.setState(Object(n.a)(Object(n.a)({},r.state),{},{width:window.innerWidth,height:window.innerHeight}))}),2e3),setInterval((function(){}),2e3),r}return Object(o.a)(a,[{key:"minIndex",value:function(e){for(var t=-1,a=999999,r=0;r<e.length;r++)e[r]<a&&(t=r,a=e[r]);return[t,a]}},{key:"findNearest",value:function(e,t){for(var a=-1,r=9999999999,n=0;n<t.length;n++){var s=this.geoDistance(e,t[n]);s<r&&(r=s,a=n)}return a}},{key:"neighborsOf",value:function(e){var t=[],a=this.state.rows,r=Math.floor(e/this.state.rows);return console.log("w  and len"+[a,this.state.squares.length]),e+a<this.state.squares.length&&t.push(e+a),e-a>=0&&t.push(e-a),Math.floor((e+1)/a)===r&&t.push(e+1),e>0&&Math.floor((e-1)/a)===r&&t.push(e-1),t}},{key:"handleClick",value:function(e){this.updateNearest();var t=this.state.squares.slice(),a=this.neighborsOf(e);if(f||e===this.nearest)for(var r=0;r<a.length;r++)if(null==t[a[r]]){console.log("Found a match! Can move "+e+" to "+a[r]),t[a[r]]=t[e],t[e]=null;break}this.setState(Object(n.a)(Object(n.a)({},this.state),{},{squares:t}))}},{key:"renderSquare",value:function(e,t){var a=this,r=.9*window.innerWidth/3,n=.9*window.innerHeight/3;return r/n>4/3?r=n*(4/3):n=r/(4/3),u.a.createElement(y,{value:this.state.squares[e],isNearest:e===this.nearest,geoUser:this.props.geoUser,geoCenter:this.props.gameData.cells[e],handleClick:function(){return a.handleClick(e)},w:r,h:n,rows:this.state.rows,cols:this.state.cols})}},{key:"updateNearest",value:function(){var e=this;this.nearest=-1;var t=[];this.props.hasLocation&&(t=this.props.gameData.cells.map((function(t){return v(e.props.geoUser,t)})),this.nearest=this.minIndex(t)[0])}},{key:"render",value:function(){return this.updateNearest(),u.a.createElement("center",null,u.a.createElement("table",{className:"grid"},u.a.createElement("tr",{className:"board-row"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),u.a.createElement("tr",{className:"board-row"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),u.a.createElement("tr",{className:"board-row"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8))))}}]),a}(u.a.Component);function q(e){return u.a.createElement("fieldset",null,u.a.createElement("legend",null," Debug Coordinates "),u.a.createElement("input",{value:e.coords[0]+", "+e.coords[1],onChange:e.onChange,style:{width:"100%"}}))}var O=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this,e)).state={hasLocation:!1,coords:[44,-63],serverData:{cells:[[44.662461,-63.603948,.075,.5],[44.664109,-63.601264,.075,.5],[44.6662,-63.600276,.075,.5],[44.659729,-63.60238,.075,.5],[44.661985,-63.598293,.075,.5],[44.664368,-63.595637,.075,.5],[44.657439,-63.598772,.075,.5],[44.659897,-63.595294,.075,.5],[44.662278,-63.591474,.075,.5]]}},navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){o.setState(Object(n.a)(Object(n.a)({},o.state),{},{coords:[e.coords.latitude,e.coords.longitude],hasLocation:!0}))})):o.setState(Object(n.a)(Object(n.a)({},o.state),{},{hasLocation:!1})),o.debugChangeCoord=o.debugChangeCoord.bind(Object(r.a)(o)),o}return Object(o.a)(a,[{key:"debugChangeCoord",value:function(e){console.log("Trying to change it...");var t=this.state.coords.slice();t=e.target.value.split(",").map((function(e){return parseFloat(e)})),this.setState(Object(n.a)(Object(n.a)({},this.state),{},{coords:t}))}},{key:"render",value:function(){return u.a.createElement("div",null,g?u.a.createElement(q,{coords:this.state.coords,onChange:this.debugChangeCoord}):null,u.a.createElement(E,{gameData:this.state.serverData,geoUser:this.state.coords,hasLocation:this.state.hasLocation}))}}]),a}(u.a.Component);d.a.render(u.a.createElement(O,null),document.getElementById("root"))},15:function(e,t,a){},9:function(e,t,a){e.exports=a(10)}},[[9,1,2]]]);
//# sourceMappingURL=main.1d92892e.chunk.js.map